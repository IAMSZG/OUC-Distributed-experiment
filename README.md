# ouc-
计算机体系结构课程里利用MPI分布式处理程序使效率更高
一、	对于源代码的修订
定义变量部分：
 

Mpi函数的使用策略部分：
两个bug，一是不再用clock()函数记录时间点，用了mpi_wtime()函数记录时间点。二是修改pVector的数据类型为double
 

FlowImagingLIC函数的修改：
 

 

 

 
 
二、实验结果（5分）
1. 绘制随线程数增长的计算用时、加速比和效率曲线。

 
加速比
 


效率：
 
2. 结合绘制的曲线和你个人电脑硬件配置，说明为什么在特定线程数时加速比达到最高以及效率达到最高。

答：因为我的电脑是8线程的，当小于8线程的时候会有空闲线程，当大于8线程的时候会分配时间片产生开销，所以当8线程数的时候加速比最高。
效率是指的一个处理器在程序运行过程中真正执行的时间比例，当一个线程的时候，线程把程序从头执行到尾所以是100%的效率，随着线程用的增多，效率会越来越低，工作被分配出去了，线程会有空等的时候。

三、实验用时统计（2.5分）
请给出你用掉的大概时间就可。
安装MPI
0.5分，仅填写下面1种即可	前导PI实验
0.5分，没做可填“-”	流场并行
编程	绘制实验结果运行成序时间
Windows	Linux	1h	36h	1.5h
0.5h				

三、实验的建议和意见（1.5分）
答：实验程序设计的很好，模块之间区分清晰，很适合用于MPI编程调试多进程运行。但是各个函数里的开销差别太大，实际上，ReadVector()函数占了百分之70的开销，剩下百分之30里，有一半多被WriteImage2PPM()函数占用，仅剩下的百分之15的开销里也主要是FlowImagingLIC()函数在作用，NormalizVectrs()，GenBoxFiltrLUT()，MakeWhiteNoise()函数加起来的开销大约占FlowImagingLIC()函数六分之一，由于读写文件的函数不能或者很难并行化，而其他函数开销太小（改为并行化时由于传播发送的开销甚至不如串行），所以最后就只对FlowImagingLIC()函数进行并行化。
